<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8">
<title>HTML5 : EventSource</title>
<style>
p {
  background:#eee;
  padding:0.5em;
  margin:0;
  font-family:sans-serif;
}
</style>
</head>
<body>

<div id="infos"></div>

<script>

var sse = new EventSource("data-json.php");
var infos = document.getElementById("infos");

sse.onmessage = function(e) {
  console.log(e);
  var donnees = JSON.parse(e.data);
  infos.innerHTML += "<p class=\"message\">"
  + "Timestamp : "+donnees.time+"<br>"
  + "Nombre al√©atoire : "+donnees.aleatoire
  + "</p>";
};

</script>

</body>
</html>
